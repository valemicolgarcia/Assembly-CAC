PB EQU 31H
CB EQU 33H
PIC EQU 20H
EOI EQU 20H
N_F10 EQU 10

ORG 40
 IP_F10 DW RUT_F10

ORG 1000H
 NUM DB 10000000B
 NUM2 DB 10000000B

ORG 3000H
 RUT_F10: PUSH AX
 PUSH BX
 PUSH CX
 PUSH DX
 MOV AL, NUM
 OUT PB, AL ;-->PRENDO LA LUZ
 CMP NUM, 0FFH
 JZ SALTAR
 MOV AH, NUM2
 MOV BL, 8
 CALL ROTARDER
 MOV NUM2, AH
 OR AH, AL
 MOV NUM, AH
 JMP FIN
 SALTAR: MOV NUM, 10000000B
 FIN: MOV AL, EOI
 OUT EOI, AL
 POP DX
 POP CX
 POP BX
 POP AX
 IRET
 
 
 ROTARDER: PUSH BX ;REUSABLE
 PUSH CX
 PUSH DX
 DEC BL; 1 BIT PARA LA DERECHA SON 8 PARA LA IZQUIERDA
 CALL ROTARIZQ
 POP DX
 POP  CX
 POP BX
 RET

 ROTARIZQ:ADD AH, AH
 JNC SIGO
 INC AH
 SIGO: DEC BL
 JNZ ROTARIZQ
 RET


ORG 2000H
 CLI 
 ;CONFIGURACION DEL PIC
 MOV AL, 0FEH
 OUT PIC+1, AL
 MOV AL, N_F10
 OUT PIC+4, AL
 ;CONGIFURACION DE LAS LUCES
 MOV AL, 0
 OUT CB, AL 
 STI
 
 LAZO: JMP LAZO

INT 0
END