HAND EQU 40H


ORG 1000H
 CADENA db "AbCd"
 FIN db ?
 A db "A"
 Z db "Z"

ORG 3000H

 
 
 SELECCIONADO: PUSH AX
 PUSH BX
 PUSH CX
 MOV CL, A
 MOV CH, Z
 INC CH
 LAZO: CMP AL, CL
 JZ VERDADERO
 INC CL
 CMP CL, CH
 JNZ LAZO
 MOV DL, 0
 JMP FINN
 VERDADERO: MOV DL, 1
 FINN: POP CX
 POP BX
 POP AX
 RET

 
ORG 2000H

 ;INICIALIZACION DEL HANDSHAKE
 IN AL, HAND+1
 AND AL, 07FH; 0111 1111 
 OUT HAND+1, AL
 
 MOV BX, OFFSET CADENA
 MOV CL, OFFSET FIN - OFFSET CADENA 
 
 LOOP: IN AL, HAND+1 ;CONSULTA DE ESTADO
 AND AL, 1
 JNZ LOOP
 
 MOV AL,[BX]
 CALL SELECCIONADO
 CMP DL, 1
 JNZ SALTEO
 OUT HAND, AL ;-->IMPRIMO
 SALTEO: INC BX
 DEC CL
 MOV DL, 0
 JNZ LOOP
 

INT 0
END